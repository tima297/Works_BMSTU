# Online Store System

## Описание задачи

Реализована полнофункциональная система интернет-магазина на C++ с использованием объектно-ориентированного программирования, умных указателей и PostgreSQL базы данных.

### Используемые технологии
- C++17 с компилятором GCC/Clang
- PostgreSQL 12+
- Библиотека libpqxx 7.0+
- CMake для сборки проекта

## Архитектура проекта

### Классы и их взаимосвязи

**Иерархия классов User:**
- `User` (базовый класс с чисто виртуальными методами)
  - `Admin` (полный доступ к системе)
  - `Manager` (управление заказами и складом)
  - `Customer` (управление своими заказами)

**Классы для заказов:**
- `Order` (основной класс заказа)
- `OrderItem` (элементы заказа, композиция с Order)
- `Payment` (оплата заказа, композиция с Order)

**Классы для товаров:**
- `Product` (информация о товаре)

### Принципы ООП

1. **Наследование**: Классы Admin, Manager, Customer наследуются от User
2. **Полиморфизм**: Каждый класс переопределяет виртуальные методы
3. **Композиция**: OrderItem и Payment являются частью Order (unique_ptr)
4. **Агрегация**: User агрегирует заказы (shared_ptr)

### Умные указатели

- `std::unique_ptr<OrderItem>` для хранения элементов заказа
- `std::unique_ptr<Payment>` для управления оплатой
- `std::shared_ptr<Order>` для агрегации заказов в User

### STL алгоритмы и лямбда-функции

Используются:
- `std::copy_if` для фильтрации заказов по статусу
- `std::accumulate` для подсчета общей суммы заказов
- Лямбда-функции для проверки прав доступа

## Работа с базой данных

### Структура базы данных

**Таблицы:**

1. `users` - информация о пользователях
2. `products` - каталог товаров
3. `orders` - заказы пользователей
4. `order_items` - элементы заказов
5. `order_status_history` - история изменения статусов
6. `audit_log` - журнал аудита действий

### Шаблонный класс DatabaseConnection<T>

```cpp
template<typename T>
class DatabaseConnection {
    // Методы для работы с БД
    std::vector<std::vector<std::string>> executeQuery(const std::string& query);
    void executeNonQuery(const std::string& query);
    void beginTransaction();
    void commitTransaction();
    void rollbackTransaction();
};
